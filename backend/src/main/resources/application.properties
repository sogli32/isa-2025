spring.application.name=backend

# PostgreSQL konekcija
spring.datasource.url=jdbc:postgresql://localhost:5432/isa-database
spring.datasource.username=postgres
spring.datasource.password=root
spring.datasource.driver-class-name=org.postgresql.Driver

# JPA / Hibernate
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true

# === Email konfiguracija ===
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=igorognjen6@gmail.com
spring.mail.password=ohlb ywfn kmph iwzk
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true
spring.mail.properties.mail.smtp.connectiontimeout=5000
spring.mail.properties.mail.smtp.timeout=5000
spring.mail.properties.mail.smtp.writetimeout=5000

# === File Upload Configuration ===
# Max file size - 200MB za video
spring.servlet.multipart.max-file-size=200MB
spring.servlet.multipart.max-request-size=210MB

# File upload location
file.upload-dir=uploads

# Geolocation settings
app.geolocation.default-radius-km=50
app.geolocation.max-radius-km=500
app.geolocation.min-radius-km=1


# ============ RABBITMQ CONFIGURATION ============
spring.rabbitmq.host=localhost
spring.rabbitmq.port=5672
spring.rabbitmq.username=guest
spring.rabbitmq.password=guest

# Connection pooling
spring.rabbitmq.listener.simple.concurrency=5
spring.rabbitmq.listener.simple.max-concurrency=10

# Retry policy
spring.rabbitmq.listener.simple.retry.enabled=true
spring.rabbitmq.listener.simple.retry.max-attempts=3
spring.rabbitmq.listener.simple.retry.initial-interval=1000

# ============ ACTUATOR (Health Checks - 3.11) ============
management.endpoints.web.exposure.include=health,info,metrics,prometheus
management.endpoint.health.show-details=always
management.health.defaults.enabled=true

# Database health check
management.health.db.enabled=true

# RabbitMQ health check
management.health.rabbit.enabled=true

# Custom health indicators
management.health.diskspace.enabled=true
management.health.ping.enabled=true

# Metrics
management.metrics.export.prometheus.enabled=true

# ============ CLUSTERING CONFIGURATION (3.11) ============
# Session management (opciono - za sticky sessions)
server.servlet.session.timeout=30m
server.servlet.session.cookie.http-only=true
server.servlet.session.cookie.secure=false

# Graceful shutdown
server.shutdown=graceful
spring.lifecycle.timeout-per-shutdown-phase=20s

# ============ LOGGING ============
logging.level.root=INFO
logging.level.com.example.backend=DEBUG
logging.level.org.springframework.amqp=INFO
logging.level.org.springframework.web.socket=DEBUG